<!DOCTYPE html>
<html>
<head>
  <title>Kids Activities</title>

  <!-- IMPORTANT for mobile -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
    }

    input {
      padding: 10px;
      width: 100%;
      max-width: 400px;
      font-size: 16px;
      margin-bottom: 10px;
    }

    button {
      margin: 6px 0;
      padding: 14px 18px;
      font-size: 16px;
      width: 200px;
      border-radius: 8px;
      cursor: pointer;
    }

    .section {
      margin-top: 20px;
    }

    .card {
      border: 1px solid #ccc;
      border-radius: 8px;
      padding: 12px;
      margin-top: 12px;
    }

    .title {
      font-weight: bold;
      cursor: pointer;
    }

    .details {
      display: none;
      margin-top: 10px;
      background: #f9f9f9;
      padding: 10px;
      border-radius: 6px;
    }

    .link-btn {
      display: inline-block;
      margin-top: 10px;
      padding: 8px 12px;
      background: #007bff;
      color: white;
      text-decoration: none;
      border-radius: 6px;
      font-size: 14px;
    }

    .disabled {
      background: #aaa;
      cursor: not-allowed;
    }

    @media (max-width: 600px) {
      button {
        width: 100%;
        font-size: 18px;
        padding: 16px;
      }
    }
  </style>
</head>

<body>

<h1>Kids Activities</h1>

<input id="search" placeholder="Search by name or code" />

<p id="welcome">
  Select a routine or category to view activities.
</p>

<div class="section">
  <h3>Routine</h3>
  <button type="button" onclick="filter('timeOfDay','Morning')">üåÖ Morning</button>
  <button type="button" onclick="filter('timeOfDay','Afternoon')">üåû Afternoon</button>
  <button type="button" onclick="filter('timeOfDay','Evening')">üåÜ Evening</button>
  <button type="button" onclick="filter('timeOfDay','Night')">üåô Night</button>
</div>

<div class="section">
  <h3>Therapy</h3>
  <button type="button" onclick="filter('category','SPH')">üó£ Speech</button>
  <button type="button" onclick="filter('category','BCH')">üß† Behaviour</button>
  <button type="button" onclick="filter('category','OT')">üñê OT</button>
</div>

<div id="list"></div>

<script>
let allData = [];

fetch('activities.json')
  .then(r => r.json())
  .then(d => allData = d);

function filter(key, value) {
  const filtered = allData.filter(a =>
    (a[key] || '').trim().toLowerCase() === value.toLowerCase()
  );
  render(filtered);
}

function render(items) {
  document.getElementById('welcome').style.display = 'none';
  const list = document.getElementById('list');
  list.innerHTML = '';

  items.forEach(a => {
    const card = document.createElement('div');
    card.className = 'card';

    const title = document.createElement('div');
    title.className = 'title';
    title.innerText = `${a.code} - ${a.name}`;

    const details = document.createElement('div');
    details.className = 'details';
    details.innerHTML = `
      <p><b>Tools:</b> ${a.tools || '-'}</p>
      <p><b>How to do:</b> ${a.howTo || '-'}</p>
      <p><b>Wording:</b> ${a.wording || '-'}</p>
    `;

    if (a.link) {
      const linkBtn = document.createElement('a');
      linkBtn.href = a.link;
      linkBtn.target = '_blank';
      linkBtn.className = 'link-btn';
      linkBtn.innerText =
        a.mediaType === 'Video' ? '‚ñ∂ View Video' : 'üñº View Visual';
      details.appendChild(linkBtn);
    } else {
      const disabled = document.createElement('span');
      disabled.className = 'link-btn disabled';
      disabled.innerText = 'Coming soon';
      details.appendChild(disabled);
    }

    title.onclick = () => {
      details.style.display =
        details.style.display === 'none' ? 'block' : 'none';
    };

    card.appendChild(title);
    card.appendChild(details);
    list.appendChild(card);
  });
}

document.getElementById('search').addEventListener('input', e => {
  const q = e.target.value.toLowerCase();
  render(
    allData.filter(a =>
      a.name.toLowerCase().includes(q) ||
      a.code.toLowerCase().includes(q)
    )
  );
});
</script>

</body>
</html>
